<!DOCTYPE html><html lang="en-au"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>The HMNZS Otorohanga - Beginning  - Fletcher Walmsley</title><meta name="description" content="Fletcher Walmsley's Website. Fletcher Walmsley is from Otorohanga, Studies Mechatronics at the University of Canterbury  "><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://fletcher-walmsley.engineer/hmnzs-otorohanga/"><link rel="alternate" type="application/atom+xml" href="https://fletcher-walmsley.engineer/feed.xml"><link rel="alternate" type="application/json" href="https://fletcher-walmsley.engineer/feed.json"><meta property="og:title" content="The HMNZS Otorohanga - Beginning "><meta property="og:site_name" content="Fletcher Walmsley"><meta property="og:description" content="Fletcher Walmsley's Website. Fletcher Walmsley is from Otorohanga, Studies Mechatronics at the University of Canterbury  "><meta property="og:url" content="https://fletcher-walmsley.engineer/hmnzs-otorohanga/"><meta property="og:type" content="article"><link rel="shortcut icon" href="https://fletcher-walmsley.engineer/media/website/favicon.ico" type="image/x-icon"><style>:root{--body-font:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";--heading-font:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";--logo-font:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";--menu-font:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol"}</style><link rel="stylesheet" href="https://fletcher-walmsley.engineer/assets/css/style.css?v=152a0b84c30cd11ca996b6f1dbb9cbc3"><link rel="stylesheet" href="https://fletcher-walmsley.engineer/assets/css/photoswipe.css?v=7331f6eb15671b2fc8e3ffd46e849f7b"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://fletcher-walmsley.engineer/hmnzs-otorohanga/"},"headline":"The HMNZS Otorohanga - Beginning ","datePublished":"2020-06-17T21:16","dateModified":"2021-05-30T23:34","description":"Fletcher Walmsley's Website. Fletcher Walmsley is from Otorohanga, Studies Mechatronics at the University of Canterbury  ","author":{"@type":"Person","name":"Fletcher Walmsley"},"publisher":{"@type":"Organization","name":"Fletcher Walmsley"}}</script><style>.pswp--svg .pswp__button,
				          .pswp--svg .pswp__button--arrow--left:before,
				          .pswp--svg .pswp__button--arrow--right:before {
					          background-image: url(https://fletcher-walmsley.engineer/assets/svg/gallery-icons-light.svg);
			              }</style><script async src="https://www.googletagmanager.com/gtag/js?id=UA-49735686-2"></script><script>window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-49735686-2');</script></head><body><div class="site-container"><header class="top" id="js-header"><a class="logo" href="https://fletcher-walmsley.engineer/">Fletcher Walmsley</a><nav class="navbar js-navbar"><button class="navbar__toggle js-toggle" aria-label="Menu" aria-haspopup="true" aria-expanded="false"><span class="navbar__toggle-box"><span class="navbar__toggle-inner">Menu</span></span></button><ul class="navbar__menu"><li><a href="https://fletcher-walmsley.engineer/about-me-2/" target="_self">About Me</a></li></ul></nav></header><main><article class="post"><div class="hero"><header class="hero__content"><div class="wrapper"><h1>The HMNZS Otorohanga - Beginning </h1><div class="post__meta post__meta--author"><img src="https://fletcher-walmsley.engineer/media/website/28468537_2075160929166868_998402505580740608_o.png" loading="eager" alt="Fletcher Walmsley" class="post__author-thumb"> <a href="https://fletcher-walmsley.engineer/authors/fletcher-walmsley/" class="feed__author invert">Fletcher Walmsley</a></div></div></header></div><div class="wrapper post__entry"><p> </p><p>The HMNZS Otorohanga is an on going project that I began during the 2019/2020 summer. The initial idea for the project began before this however, during Semester 2 of 2019. After completing an intro course into control systems, I had the desire to learn more about them. After watching videos on YouTube about autopilot systems for RC planes, I had the desire to create my own autopilot systems. My initial plan was to create a homemade RC plane auto pilot system. However, after a bit of research I decided that this might be biting off more than I could chew for a first attempt. The next idea was to create a land based rover. This time, I determined that this wasn't ambitious enough and would be relatively boring to watch. This is when I settled on creating an autonomous boat. This idea had the benefit of not falling out of the sky if something goes wrong, a lake would provide a large open area giving great GPS signal, and I determined that a boat was likely to be the easiest to built. </p><p>So, at the beginning of January, I placed a large order for electronic components from Alibaba and began planning.</p><p>The first parts that arrived were the GPS module, Bluetooth module and Magnetometer (compass). The photo below shows these components on a breadboard and connected to a Arduino Uno. With the left most is the GPS unit, the middle is the Bluetooth Module and the right most is the Magnetometer . </p><figure class="post__image post__image--center"><img loading="lazy" src="https://fletcher-walmsley.engineer/media/posts/6/IMG_20200118_174526-2.jpg" sizes="(max-width: 48em) 100vw, 768px" srcset="https://fletcher-walmsley.engineer/media/posts/6/responsive/IMG_20200118_174526-2-xs.jpg 300w, https://fletcher-walmsley.engineer/media/posts/6/responsive/IMG_20200118_174526-2-sm.jpg 480w, https://fletcher-walmsley.engineer/media/posts/6/responsive/IMG_20200118_174526-2-md.jpg 768w, https://fletcher-walmsley.engineer/media/posts/6/responsive/IMG_20200118_174526-2-lg.jpg 1024w, https://fletcher-walmsley.engineer/media/posts/6/responsive/IMG_20200118_174526-2-xl.jpg 1360w, https://fletcher-walmsley.engineer/media/posts/6/responsive/IMG_20200118_174526-2-2xl.jpg 1600w" alt="Figure 1: GPS and Magnetometer testing " width="444" height="333"><figcaption>Figure 1: GPS and Magnetometer testing </figcaption></figure><p>With the above setup, an Android app was made using MIT's App Inventor  to send GPS coordinates to the Arduino over a Bluetooth connection. A screenshot of this App can be seen below</p><figure class="post__image post__image--center"><img loading="lazy" src="https://fletcher-walmsley.engineer/media/posts/6/Seeker_App-2.jpg" sizes="(max-width: 48em) 100vw, 768px" srcset="https://fletcher-walmsley.engineer/media/posts/6/responsive/Seeker_App-2-xs.jpg 300w, https://fletcher-walmsley.engineer/media/posts/6/responsive/Seeker_App-2-sm.jpg 480w, https://fletcher-walmsley.engineer/media/posts/6/responsive/Seeker_App-2-md.jpg 768w, https://fletcher-walmsley.engineer/media/posts/6/responsive/Seeker_App-2-lg.jpg 1024w, https://fletcher-walmsley.engineer/media/posts/6/responsive/Seeker_App-2-xl.jpg 1360w, https://fletcher-walmsley.engineer/media/posts/6/responsive/Seeker_App-2-2xl.jpg 1600w" alt="" width="212" height="448"><figcaption>Screenshot of the GPS app</figcaption></figure><p>From here, the Ardunio would print out over the serial monitor to a connected Laptop what heading the user needed to walk in to reach the desired location, along with the current heading and the distance in metres from the location.</p><p>Next, Ardunio Nanos, the rudder servo, and some perf board arrived. So, with a basic design mapped out, I soldered some headers to the perf board and connected them together with pieces of scrap wire. The chosen design used two Ardunio Nanos, as it was feared that a single one won't enough the processing power due to the high amount of floating point arthritic that would be required due to both the GPS and magnetometer processing. </p><p>Once this board was made, I decide to create and test a PID controller for the rudder. For this test I mounted the magnetometer to the arm of the rudder servo and created a controller that would attempt to keep the magnetometer pointed towards a 0 degree heading. A video of this in action can be seen in below.</p><figure class="post__video"><iframe loading="lazy" width="560" height="314" src="https://www.youtube.com/embed/j0m7tOLf_Ho" allowfullscreen="allowfullscreen" data-mce-fragment="1"></iframe></figure><p>Considering that the magnetometer and PID gains weren't optimally calibrated, along with the test being done in a metal shipping container, I was pretty happy with the result. Unfortunately, I burnt out a nano and my only magnetometer in the process, which stopped any further development in this area. Due to Covid-19, I have had delays in getting replacement components. As such, I am yet to continue developing the PID system.</p><p>Due to the magnetometer being a critical part in the automated boats control system, I decided to temporarily make the remotely controlled via Smartphone using Bluetooth. This process was relatively simple as I could use the same perf board that had already created, with the only major change being in software. As such, the app was updated to have a second screen that could be used to send throttle and steering commands adn the Ardunio code was modified to decode and respond to the apps requests. The throttle on the boat was controlled by using the PWM function of the Ardunio which varied the speed of a DC motor via a MOSFET. The steering control was done using the Ardunios inbuilt servo control library which aloud the for easy communication between the two. </p><p>A screenshot of the modified Android app can be seen below</p><figure class="post__image post__image--center"><img loading="lazy" src="https://fletcher-walmsley.engineer/media/posts/6/Manual_Control.jpg" sizes="(max-width: 48em) 100vw, 768px" srcset="https://fletcher-walmsley.engineer/media/posts/6/responsive/Manual_Control-xs.jpg 300w, https://fletcher-walmsley.engineer/media/posts/6/responsive/Manual_Control-sm.jpg 480w, https://fletcher-walmsley.engineer/media/posts/6/responsive/Manual_Control-md.jpg 768w, https://fletcher-walmsley.engineer/media/posts/6/responsive/Manual_Control-lg.jpg 1024w, https://fletcher-walmsley.engineer/media/posts/6/responsive/Manual_Control-xl.jpg 1360w, https://fletcher-walmsley.engineer/media/posts/6/responsive/Manual_Control-2xl.jpg 1600w" alt="" width="193" height="407"><figcaption>Screenshot of the manual boat control portion of the App</figcaption></figure><p>With the code and electronics largely built, it was time to built the boat itself! The images below show the boat at various stages throughout the build. </p><div class="gallery-wrapper"><div class="gallery" data-is-empty="false" data-columns="2"><figure class="gallery__item"><a href="https://fletcher-walmsley.engineer/media/posts/6/gallery/Boat_Above.jpg" data-size="1236x927"><img loading="lazy" src="https://fletcher-walmsley.engineer/media/posts/6/gallery/Boat_Above-thumbnail.jpg" alt="" width="720" height="540"></a><figcaption>Top View of the the boat</figcaption></figure><figure class="gallery__item"><a href="https://fletcher-walmsley.engineer/media/posts/6/gallery/Boat_Duct_Tap.jpg" data-size="1228x921"><img loading="lazy" src="https://fletcher-walmsley.engineer/media/posts/6/gallery/Boat_Duct_Tap-thumbnail.jpg" alt="" width="720" height="540"></a><figcaption>Underside of the boat while Duct Tape is being applied</figcaption></figure><figure class="gallery__item"><a href="https://fletcher-walmsley.engineer/media/posts/6/gallery/Boat_Overview.jpg" data-size="1229x922"><img loading="lazy" src="https://fletcher-walmsley.engineer/media/posts/6/gallery/Boat_Overview-thumbnail.jpg" alt="" width="720" height="540"></a><figcaption>Boat with it's electronic components removed</figcaption></figure><figure class="gallery__item"><a href="https://fletcher-walmsley.engineer/media/posts/6/gallery/Boat_Rear.jpg" data-size="1233x924"><img loading="lazy" src="https://fletcher-walmsley.engineer/media/posts/6/gallery/Boat_Rear-thumbnail.jpg" alt="" width="720" height="540"></a><figcaption>Read of the boat showing the prop</figcaption></figure><figure class="gallery__item"><a href="https://fletcher-walmsley.engineer/media/posts/6/gallery/Boat_Eletronic_Components_in_Tub.jpg" data-size="1221x916"><img loading="lazy" src="https://fletcher-walmsley.engineer/media/posts/6/gallery/Boat_Eletronic_Components_in_Tub-thumbnail.jpg" alt="" width="720" height="540"></a><figcaption>Image of the boat with all its electronic components installed</figcaption></figure></div></div><p>The boat itself was made out of foam boat, which was attached together with hotglue. The seals of which where covered with duct tape in case any gaps in the glue existed. </p><p>With all the required components installed, the HMNZS Otorohanga was now ready for testing. The videos below showcase both the App and the boat itself in action.</p><figure class="post__video"><iframe loading="lazy" width="560" height="314" src="https://www.youtube.com/embed/_Ga9dTswNfQ" allowfullscreen="allowfullscreen" data-mce-fragment="1"></iframe></figure><figure class="post__video"><iframe loading="lazy" width="560" height="314" src="https://www.youtube.com/embed/b-F4Rv8bRAQ" allowfullscreen="allowfullscreen" data-mce-fragment="1"></iframe></figure><p>This is the current state of the project. I have began working on communication between the boat and my Laptop, which shows the boats location in real time with Google Earth. However, I am still waiting on parts that will allow me to implement this development into the boat. </p></div><footer class="wrapper post__footer"><p class="post__last-updated">This article was updated on 30 May 2021</p><div class="post__share"></div></footer></article><nav class="post__nav"><div class="post__nav-inner"><div class="post__nav-next"><a href="https://fletcher-walmsley.engineer/the-foam-boat-that-almost-could/" class="invert post__nav-link" rel="next"><span>Next</span> The Foam Boat That (Almost) Could </a><svg width="1.041em" height="0.416em" aria-hidden="true"><use xlink:href="https://fletcher-walmsley.engineer/assets/svg/svg-map.svg#arrow-next"/></svg></div></div></nav></main><footer class="footer"><div class="footer__copyright"><p>Hosted with <a href="https://pages.github.com/">GitHub Pages</a>, built using <a href="https://getpublii.com" target="_blank" rel="nofollow noopener">Publii</a></p></div><button class="footer__bttop js-footer__bttop" aria-label="Back to top"><svg><title>Back to top</title><use xlink:href="https://fletcher-walmsley.engineer/assets/svg/svg-map.svg#toparrow"/></svg></button></footer></div><script>window.publiiThemeMenuConfig = {    
        mobileMenuMode: 'overlay',
        animationSpeed: 300,
        submenuWidth: 'auto',
        doubleClickTime: 500,
        mobileMenuExpandableSubmenus: true, 
        relatedContainerForOverlayMenuSelector: '.top',
   };</script><script defer="defer" src="https://fletcher-walmsley.engineer/assets/js/scripts.min.js?v=f4c4d35432d0e17d212f2fae4e0f8247"></script><script>var images = document.querySelectorAll('img[loading]');

        for (var i = 0; i < images.length; i++) {
            if (images[i].complete) {
                images[i].classList.add('is-loaded');
            } else {
                images[i].addEventListener('load', function () {
                    this.classList.add('is-loaded');
                }, false);
            }
        }</script><script defer="defer" src="https://fletcher-walmsley.engineer/assets/js/photoswipe.min.js?v=b586a3bc288c989ecce7b81b48e35855"></script><script defer="defer" src="https://fletcher-walmsley.engineer/assets/js/photoswipe-ui-default.min.js?v=9952f77ca2b8fbc9449a268008ea8dee"></script><script>var initPhotoSwipeFromDOM=function(gallerySelector){var parseThumbnailElements=function(el){var thumbElements=el.childNodes,numNodes=thumbElements.length,items=[],figureEl,linkEl,size,item;for(var i=0;i<numNodes;i++){figureEl=thumbElements[i];if(figureEl.nodeType!==1){continue;}
          linkEl=figureEl.children[0];size=linkEl.getAttribute('data-size').split('x');item={src:linkEl.getAttribute('href'),w:parseInt(size[0],10),h:parseInt(size[1],10)};if(figureEl.children.length>1){item.title=figureEl.children[1].innerHTML;}
          if(linkEl.children.length>0){item.msrc=linkEl.children[0].getAttribute('src');}
          item.el=figureEl;items.push(item);}
          return items;};var closest=function closest(el,fn){return el&&(fn(el)?el:closest(el.parentNode,fn));};var onThumbnailsClick=function(e){e=e||window.event;e.preventDefault?e.preventDefault():e.returnValue=false;var eTarget=e.target||e.srcElement;var clickedListItem=closest(eTarget,function(el){return(el.tagName&&el.tagName.toUpperCase()==='FIGURE');});if(!clickedListItem){return;}
          var clickedGallery=clickedListItem.parentNode,childNodes=clickedListItem.parentNode.childNodes,numChildNodes=childNodes.length,nodeIndex=0,index;for(var i=0;i<numChildNodes;i++){if(childNodes[i].nodeType!==1){continue;}
          if(childNodes[i]===clickedListItem){index=nodeIndex;break;}
          nodeIndex++;}
          if(index>=0){openPhotoSwipe(index,clickedGallery);}
          return false;};var photoswipeParseHash=function(){var hash=window.location.hash.substring(1),params={};if(hash.length<5){return params;}
          var vars=hash.split('&');for(var i=0;i<vars.length;i++){if(!vars[i]){continue;}
          var pair=vars[i].split('=');if(pair.length<2){continue;}
          params[pair[0]]=pair[1];}
          if(params.gid){params.gid=parseInt(params.gid,10);}
          return params;};var openPhotoSwipe=function(index,galleryElement,disableAnimation,fromURL){var pswpElement=document.querySelectorAll('.pswp')[0],gallery,options,items;items=parseThumbnailElements(galleryElement);options={galleryUID:galleryElement.getAttribute('data-pswp-uid'),getThumbBoundsFn:function(index){var thumbnail=items[index].el.getElementsByTagName('img')[0],pageYScroll=window.pageYOffset||document.documentElement.scrollTop,rect=thumbnail.getBoundingClientRect();return{x:rect.left,y:rect.top+pageYScroll,w:rect.width};},
          mainClass:'pswp--dark',
          preload: [1,2],
          hideAnimationDuration:200,
          showAnimationDuration:0,
          bgOpacity: 0.7,
          showHideOpacity:true,
          closeOnScroll: true,
          arrowKeys: true,
          closeEl: true,
          captionEl: true,
          fullscreenEl: true,
          zoomEl: true,
          shareEl: true,
          counterEl: true,
          arrowEl: true,
          preloaderEl: true
          };if(fromURL){if(options.galleryPIDs){for(var j=0;j<items.length;j++){if(items[j].pid==index){options.index=j;break;}}}else{options.index=parseInt(index,10)-1;}}else{options.index=parseInt(index,10);}
          if(isNaN(options.index)){return;}
          if(disableAnimation){options.showAnimationDuration=0;}
          gallery=new PhotoSwipe(pswpElement,PhotoSwipeUI_Default,items,options);gallery.init();gallery.options.escKey=true;};var galleryElements=document.querySelectorAll(gallerySelector);for(var i=0,l=galleryElements.length;i<l;i++){galleryElements[i].setAttribute('data-pswp-uid',i+1);galleryElements[i].onclick=onThumbnailsClick;}
          var hashData=photoswipeParseHash();if(hashData.pid&&hashData.gid){openPhotoSwipe(hashData.pid,galleryElements[hashData.gid-1],true,true);}};initPhotoSwipeFromDOM('.gallery');</script><div class="pswp" tabindex="-1" role="dialog" aria-hidden="true"><div class="pswp__bg"></div><div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div><div class="pswp__item"></div><div class="pswp__item"></div></div><div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><div class="pswp__counter"></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button><button class="pswp__button pswp__button--share" title="Share"></button><button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button><button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button><button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div></div></body></html>